"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["node_modules_majra_src_components_fields_UploadBox_vue"],{

/***/ "./node_modules/majra/src/components/fields/UploadBox.vue":
/*!****************************************************************!*\
  !*** ./node_modules/majra/src/components/fields/UploadBox.vue ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./UploadBox.vue?vue&type=template&id=a06ea67e& */ "./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e&");
/* harmony import */ var _UploadBox_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./UploadBox.vue?vue&type=script&lang=js& */ "./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js&");
/* harmony import */ var _vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../vue-loader/lib/runtime/componentNormalizer.js */ "./node_modules/vue-loader/lib/runtime/componentNormalizer.js");





/* normalize component */
;
var component = (0,_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_2__["default"])(
  _UploadBox_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__["default"],
  _UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__.render,
  _UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns,
  false,
  null,
  null,
  null
  
)

/* hot reload */
if (false) { var api; }
component.options.__file = "node_modules/majra/src/components/fields/UploadBox.vue"
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component.exports);

/***/ }),

/***/ "./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js&":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _utilities_FieldSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../utilities/FieldSet */ "./node_modules/majra/src/components/utilities/FieldSet.vue");
/* harmony import */ var _AbstractField__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AbstractField */ "./node_modules/majra/src/components/fields/AbstractField.vue");
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  extends: _AbstractField__WEBPACK_IMPORTED_MODULE_1__["default"],

  components: { FieldSet: _utilities_FieldSet__WEBPACK_IMPORTED_MODULE_0__["default"] },

  data() {
    return {
      loading: false,
      progress: 0,
    };
  },

  methods: {
    upload(file, field) {
      let _safe = this.$helpers.getSafe;
      file = file.target.files[0];
      if (!file) return;
      const config = {
        onUploadProgress: (progressEvent) =>
          (this.progress = (progressEvent.loaded / progressEvent.total) * 100),
      };
      this.loading = true;
      var formData = new FormData();
      formData.append("file", file);
      formData.append("type", field.fileType);
      this.axios
        .post(this.field.uploadPath, formData, config)
        .then((response) => {
          if (!field.multiple) {
            return this.updateField(
              _safe(response, "data." + _safe(this.field, "uploadKey", "link"))
            );
          }
          let temp = this.value || [];
          this.updateField([
            ...temp,
            _safe(response, "data." + _safe(this.field, "uploadKey", "link")),
          ]);
          this._event("alert", { text: "با موفقیت آپلود شد", color: "green" });
        })
        .catch(() => {
          this._event("alert", {
            text: "مشکلی در ارسال فایل رخ داده است",
            color: "red",
          });
        })
        .finally(() => (this.loading = false));
    },
    openFile(file) {
      return window.open(this.$majra.configs.BASE_URL + file);
    },
    remove(file) {
      this.updateField(
        Array.isArray(this.value) ? this.value.filter((f) => f != file) : null
      );
    },
  },

  computed: {
    files() {
      return Array.isArray(this.value)
        ? this.value
        : this.value
        ? [this.value]
        : [];
    },
  },
});


/***/ }),

/***/ "./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js&":
/*!*****************************************************************************************!*\
  !*** ./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _vue_loader_lib_index_js_vue_loader_options_UploadBox_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../vue-loader/lib/index.js??vue-loader-options!./UploadBox.vue?vue&type=script&lang=js& */ "./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=script&lang=js&");
 /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_vue_loader_lib_index_js_vue_loader_options_UploadBox_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__["default"]); 

/***/ }),

/***/ "./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e&":
/*!***********************************************************************************************!*\
  !*** ./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e& ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* reexport safe */ _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__.render),
/* harmony export */   "staticRenderFns": () => (/* reexport safe */ _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__.staticRenderFns)
/* harmony export */ });
/* harmony import */ var _vue_loader_lib_loaders_templateLoader_js_vue_loader_options_vue_loader_lib_index_js_vue_loader_options_UploadBox_vue_vue_type_template_id_a06ea67e___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../vue-loader/lib/index.js??vue-loader-options!./UploadBox.vue?vue&type=template&id=a06ea67e& */ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e&");


/***/ }),

/***/ "./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e&":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib/index.js??vue-loader-options!./node_modules/majra/src/components/fields/UploadBox.vue?vue&type=template&id=a06ea67e& ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "render": () => (/* binding */ render),
/* harmony export */   "staticRenderFns": () => (/* binding */ staticRenderFns)
/* harmony export */ });
var render = function () {
  var _vm = this
  var _h = _vm.$createElement
  var _c = _vm._self._c || _h
  return _c(
    "field-set",
    {
      staticClass: "d-flex flex-row flex-wrap",
      staticStyle: { "min-height": "100px" },
      attrs: { label: "آپلود " + _vm.field.title },
    },
    [
      _vm.loading
        ? _c(
            "v-col",
            { attrs: { cols: "12" } },
            [_c("v-progress-linear", { attrs: { value: _vm.progress } })],
            1
          )
        : _vm._e(),
      _vm._v(" "),
      _vm.field.multiple || _vm.files.length == 0
        ? _c(
            "v-card",
            {
              staticClass:
                "mx-1 col-2 my-1 pa-2 d-flex align-center justify-center",
              staticStyle: { border: "1px dashed black" },
              attrs: { "max-height": "130px" },
              on: { click: function () {} },
            },
            [
              _c(
                "label",
                {
                  staticClass: "fill-height col-12 d-flex justify-center",
                  staticStyle: { cursor: "pointer" },
                },
                [
                  _c("input", {
                    staticClass: "d-none",
                    attrs: { type: "file" },
                    on: {
                      change: function ($event) {
                        return _vm.upload($event, _vm.field)
                      },
                    },
                  }),
                  _vm._v(" "),
                  _vm.loading
                    ? _c("v-icon", [_vm._v("mdi-loading mdi-spin")])
                    : _c("v-icon", [_vm._v("mdi-plus")]),
                ],
                1
              ),
            ]
          )
        : _vm._e(),
      _vm._v(" "),
      _vm._l(_vm.files, function (file) {
        return _c(
          "v-card",
          {
            key: file,
            staticClass:
              "mx-1 col-2 my-1 pa-2 d-flex align-center justify-center",
            staticStyle: { border: "1px solid black" },
            attrs: { "max-width": "150", "max-height": "130px" },
            on: {
              click: function ($event) {
                return _vm.openFile(file)
              },
            },
          },
          [
            _vm.field.isImage
              ? _c("v-img", {
                  attrs: { src: _vm.$majra.configs.BASE_URL + file },
                })
              : _c(
                  "div",
                  { staticStyle: { "word-break": "break-all !important" } },
                  [_vm._v("دانلود")]
                ),
            _vm._v(" "),
            _c(
              "v-btn",
              {
                staticClass: "px-1 py-0",
                staticStyle: { position: "absolute", left: "0px", top: "0px" },
                attrs: { text: "", color: "error", "x-small": "" },
                on: {
                  click: function ($event) {
                    return _vm.remove(file)
                  },
                },
              },
              [_c("v-icon", { attrs: { small: "" } }, [_vm._v("mdi-close")])],
              1
            ),
          ],
          1
        )
      }),
    ],
    2
  )
}
var staticRenderFns = []
render._withStripped = true



/***/ })

}]);